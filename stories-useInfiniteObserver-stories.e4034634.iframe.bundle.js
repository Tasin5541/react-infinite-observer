/*! For license information please see stories-useInfiniteObserver-stories.e4034634.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkreact_infinite_observer=self.webpackChunkreact_infinite_observer||[]).push([[828],{"./src/stories/useInfiniteObserver.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DynamicRefElement:()=>DynamicRefElement,StaticRefElement:()=>StaticRefElement,__namedExportsOrder:()=>__namedExportsOrder,default:()=>useInfiniteObserver_stories});var react=__webpack_require__("./node_modules/react/index.js");const useInfiniteObserver=({onIntersection,threshold=1})=>{const[refElement,setRefElement]=(0,react.useState)(null),visited=(0,react.useRef)(!1),observer=(0,react.useRef)(new IntersectionObserver((entries=>{entries[0].isIntersecting&&!visited.current&&(onIntersection(),visited.current=!0)}),{threshold}));return(0,react.useEffect)((()=>{const currentobserver=observer.current;return refElement&&(visited.current=!1,currentobserver.observe(refElement)),()=>{refElement&&currentobserver.unobserve(refElement)}}),[refElement]),[setRefElement]};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const useInfiniteObserver_stories={title:"Hooks/useInfiniteObserver",component:useInfiniteObserver},ItemComponent=({items,setRefElement,isAdvanced=!1})=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isAdvanced?items.map(((item,index)=>(0,jsx_runtime.jsx)("li",{ref:index===items.length-1?setRefElement:void 0,children:item.name.last},`${item.id.name}-${item.id.value}-${item.login.uuid}`))):items.map((item=>(0,jsx_runtime.jsx)("li",{children:item.name.last},`${item.id.name}-${item.id.value}-${item.login.uuid}`))),(0,jsx_runtime.jsx)("div",{ref:setRefElement})]}),Template=({isAdvanced=!1})=>{const[items,setItems]=(0,react.useState)([]),[isLoading,setIsLoading]=(0,react.useState)(!1),[page,setPage]=(0,react.useState)(1),onIntersection=(0,react.useCallback)((()=>{setPage((pageNo=>pageNo+1))}),[]),[setRefElement]=useInfiniteObserver({onIntersection});return(0,react.useEffect)((()=>{(async()=>{setIsLoading(!0);try{const response=await fetch(`https://randomuser.me/api/?page=${page}&results=5&seed=abc`),data=await response.json();setItems(page>1?prevItems=>[...prevItems,...data.results]:data.results)}catch(error){}finally{setIsLoading(!1)}})()}),[page]),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{children:isAdvanced?"With Dynamic Ref, if the initial fetched list does not fill the screen, the list is fetched multiple times untill screen is filled":"With Static Ref, if the initial fetched list does not fill the screen, the list is fetched again only once. If even that does not fill thes creen, infinite scrolling stops working"}),(0,jsx_runtime.jsxs)("p",{children:["Fetch Count: ",page]}),(0,jsx_runtime.jsx)("ul",{children:(0,jsx_runtime.jsx)(ItemComponent,{items,setRefElement,isAdvanced})}),isLoading&&(0,jsx_runtime.jsx)("p",{children:"Loading..."})]})};Template.displayName="Template";const BasicStory=()=>(0,jsx_runtime.jsx)(Template,{isAdvanced:!1});BasicStory.displayName="BasicStory";const AdvancedStory=()=>(0,jsx_runtime.jsx)(Template,{isAdvanced:!0});AdvancedStory.displayName="AdvancedStory";const DynamicRefElement=AdvancedStory.bind({}),StaticRefElement=BasicStory.bind({});DynamicRefElement.parameters={...DynamicRefElement.parameters,docs:{...DynamicRefElement.parameters?.docs,source:{originalSource:"() => <Template isAdvanced />",...DynamicRefElement.parameters?.docs?.source}}},StaticRefElement.parameters={...StaticRefElement.parameters,docs:{...StaticRefElement.parameters?.docs,source:{originalSource:"() => <Template isAdvanced={false} />",...StaticRefElement.parameters?.docs?.source}}};const __namedExportsOrder=["DynamicRefElement","StaticRefElement"]},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var f=__webpack_require__("./node_modules/react/index.js"),k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,g){var b,d={},e=null,h=null;for(b in void 0!==g&&(e=""+g),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(h=a.ref),a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l,exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")}}]);